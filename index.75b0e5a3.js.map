{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-7bd19b7b864a9161.js","src/js/gallery-container/popular-movies-gallery.js","src/js/gallery-container/moviesByQuery.js","node_modules/@parcel/runtime-js/lib/runtime-66a833c3ce288435.js","node_modules/@parcel/runtime-js/lib/runtime-0c53f941e5feb3f2.js","node_modules/@parcel/runtime-js/lib/runtime-e60f4799140968e8.js","node_modules/@parcel/runtime-js/lib/runtime-90f9daa1f07991a1.js","node_modules/@parcel/runtime-js/lib/runtime-9bf0dd31e4979391.js","node_modules/@parcel/runtime-js/lib/runtime-820e206c3baf7d1e.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.75b0e5a3.js\\\",\\\"1iAaM\\\":\\\"oops-desktop.3fb25bbe.png\\\",\\\"a8mLy\\\":\\\"oops-desktop@2x.82a9e4b3.png\\\",\\\"6EBfp\\\":\\\"oops-tab.659a16ce.png\\\",\\\"kUGXk\\\":\\\"oops-tab@2x.feb87145.png\\\",\\\"40zLy\\\":\\\"oops-mob.4362e71e.png\\\",\\\"ebhGQ\\\":\\\"oops-mob@2x.08d64316.png\\\",\\\"b9auz\\\":\\\"index.bcdadb32.js\\\"}\"));","import { Notify } from 'notiflix';\n\nimport { paginationHome } from '../pagination';\nimport { tmdbApi } from './create-movies-list';\nimport { createMoviesList } from './create-movies-list';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport { refs } from '../refs';\nimport { scrollToTop } from '../scrollToTop';\nimport {\n  addClass,\n  hideElement,\n  removeClass,\n  showElement,\n} from '../common-methods';\nimport {\n  initialPageQuery,\n  loadMoreMoviesByQuery,\n  loadMoviesByQuery,\n} from './moviesByQuery';\n\nconst storedQuery = sessionStorage.getItem('userQuery');\naddClass(refs.homeLink, 'active-link');\nremoveClass(refs.libraryLink, 'active-link');\nsessionStorage.removeItem('currentPageLibraryQueue');\nsessionStorage.removeItem('currentPageLibraryWatched');\n\nif (storedQuery) {\n  refs.searchInput.value = storedQuery;\n  paginationHome.off('afterMove', loadMoreTrendingMovies);\n  loadMoviesByQuery(storedQuery, initialPageQuery);\n  paginationHome.on('afterMove', loadMoreMoviesByQuery);\n} else {\n  paginationHome.off('afterMove', loadMoreMoviesByQuery);\n  paginationHome.on('afterMove', loadMoreTrendingMovies);\n  createPopularMoviesGallery();\n}\n\nrefs.homeLink.addEventListener('click', () => {\n  sessionStorage.removeItem('currentPageHomePopularMovies');\n  sessionStorage.removeItem('currentPageHomeQuery');\n  sessionStorage.removeItem('userQuery');\n});\n\nasync function createPopularMoviesGallery() {\n  hideElement(refs.paginationBlock);\n\n  const storedPagePopularMovies = sessionStorage.getItem(\n    'currentPageHomePopularMovies'\n  );\n  const initialPagePopularMovies = storedPagePopularMovies\n    ? storedPagePopularMovies\n    : 1;\n\n  try {\n    spinnerStart();\n\n    const { data } = await tmdbApi.fetchPopularMovies(initialPagePopularMovies);\n    const { total_results } = data;\n\n    paginationHome.reset(total_results);\n    paginationHome.movePageTo(initialPagePopularMovies);\n\n    setTimeout(() => {\n      showElement(refs.paginationBlock);\n    }, 300);\n  } catch (error) {\n    hideElement(refs.paginationBlock);\n    Notify.failure(`${error.message}`);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 200);\n  }\n}\n\nexport async function loadMoreTrendingMovies(event) {\n  const currentPage = event.page;\n\n  try {\n    spinnerStart();\n\n    const { data } = await tmdbApi.fetchPopularMovies(currentPage);\n    const { results } = data;\n\n    createMoviesList(results);\n\n    sessionStorage.setItem('currentPageHomePopularMovies', currentPage);\n\n    scrollToTop();\n  } catch (err) {\n    hideElement(refs.paginationBlock);\n    Notify.failure(`${err.message}`);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 200);\n  }\n}\n","import { Notify } from 'notiflix';\n\nimport { paginationHome } from '../pagination';\nimport { refs } from '../refs';\nimport { tmdbApi } from './create-movies-list';\nimport { createMoviesList } from './create-movies-list';\nimport { loadMoreTrendingMovies } from './popular-movies-gallery';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport { scrollToTop } from '../scrollToTop';\nimport { createImageNotification } from '../image-notification';\nimport { hideElement, showElement } from '../common-methods';\n\nimport oopsDesktop1 from '../../images/oops/oops-desktop.png';\nimport oopsDesktop2 from '../../images/oops/oops-desktop@2x.png';\nimport oopsTab1 from '../../images/oops/oops-tab.png';\nimport oopsTab2 from '../../images/oops/oops-tab@2x.png';\nimport oopsMob1 from '../../images/oops/oops-mob.png';\nimport oopsMob2 from '../../images/oops/oops-mob@2x.png';\n\nexport const storedPageQuery = sessionStorage.getItem('currentPageHomeQuery');\nexport const initialPageQuery = storedPageQuery\n  ? parseInt(storedPageQuery, 10)\n  : 1;\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  hideElement(refs.paginationBlock);\n  paginationHome.off('afterMove', loadMoreTrendingMovies);\n  paginationHome.off('afterMove', loadMoreMoviesByQuery);\n  paginationHome.on('afterMove', loadMoreMoviesByQuery);\n  e.preventDefault();\n\n  sessionStorage.removeItem('currentPageHomePopularMovies');\n\n  refs.moviesList.innerHTML = '';\n\n  const query = e.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    Notify.failure('Enter a key-word, please');\n    return;\n  }\n\n  loadMoviesByQuery(query, (page = 1));\n}\n\nexport async function loadMoviesByQuery(query, page) {\n  paginationHome.off('afterMove', loadMoreTrendingMovies);\n  try {\n    spinnerStart();\n\n    const { data } = await tmdbApi.fetchMoviesByQuery(query, page);\n    const { total_results } = data;\n\n    if (total_results === 0) {\n      document.body.classList.add('alarm-btn-visible');\n      sessionStorage.removeItem('userQuery');\n      hideElement(refs.paginationBlock);\n\n      let oopsText = 'There are no movies matching your query';\n      refs.moviesList.innerHTML = '';\n      refs.moviesList.insertAdjacentHTML(\n        'afterbegin',\n        createImageNotification(\n          oopsDesktop1,\n          oopsDesktop2,\n          oopsTab1,\n          oopsTab2,\n          oopsMob1,\n          oopsMob2,\n          oopsText\n        )\n      );\n\n      return Notify.failure(\n        'There are no movies matching your query. Enter another key-word, please'\n      );\n    }\n\n    sessionStorage.setItem('userQuery', query);\n    paginationHome.reset(total_results);\n    paginationHome.movePageTo(page);\n\n    setTimeout(() => {\n      showElement(refs.paginationBlock);\n    }, 300);\n  } catch (error) {\n    Notify.failure(`${error.message}`);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 300);\n  }\n}\n\nexport async function loadMoreMoviesByQuery(event) {\n  const currentPage = event.page;\n  const storedQuery = sessionStorage.getItem('userQuery');\n\n  try {\n    spinnerStart();\n    const { data } = await tmdbApi.fetchMoviesByQuery(storedQuery, currentPage);\n\n    const { results } = data;\n\n    createMoviesList(results);\n    sessionStorage.setItem('currentPageHomeQuery', currentPage);\n\n    scrollToTop();\n  } catch (error) {\n    Notify.failure(`${error.message}`);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 300);\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1iAaM\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"a8mLy\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6EBfp\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kUGXk\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"40zLy\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ebhGQ\")).toString();"],"names":["parcelRequire","register","JSON","parse","$7Y9D8","$224a084430bf716e$exports","URL","resolve","import","meta","url","toString","$8ec20fc041612355$exports","$a9e194d73c6f8fdd$exports","$b3fcf0e6660f351e$exports","$8be4d830d65509a5$exports","$9f8a699be0ef0e60$exports","$1f5d644997628cfd$export$7bce0286e51818d8","sessionStorage","getItem","$1f5d644997628cfd$export$e4b0f94fdc636d17","parseInt","async","$1f5d644997628cfd$export$f19c9b03f51cfb40","query","page","$2nhTy","paginationHome","off","$31ea101c42608567$export$437c3137933a8d1f","$gjiCh","spinnerStart","data","$jG9k4","tmdbApi","fetchMoviesByQuery","total_results","document","body","classList","add","removeItem","$cXoHY","hideElement","$krGWQ","refs","paginationBlock","oopsText","moviesList","innerHTML","insertAdjacentHTML","$a1APH","createImageNotification","$parcel$interopDefault","Notify","failure","setItem","reset","movePageTo","setTimeout","showElement","error","message","spinnerStop","$1f5d644997628cfd$export$1889e5eca8c303c2","event","currentPage","storedQuery","results","createMoviesList","$h0oKa","scrollToTop","searchForm","addEventListener","e","on","preventDefault","target","elements","searchQuery","value","trim","$31ea101c42608567$var$storedQuery","fetchPopularMovies","err","addClass","homeLink","removeClass","libraryLink","searchInput","storedPagePopularMovies","initialPagePopularMovies","$31ea101c42608567$var$createPopularMoviesGallery"],"version":3,"file":"index.75b0e5a3.js.map"}