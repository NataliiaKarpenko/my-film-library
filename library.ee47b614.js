function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},a=n.parcelRequireb785;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},n.parcelRequireb785=a),a.register("kyEFX",(function(t,n){var r,o;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var a={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},o=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("kyEFX").register(JSON.parse('{"1zJhX":"library.ee47b614.js","jUDzA":"shelf-desktop.7bb6d0fb.png","2fqpn":"shelf-desktop@2x.6909a1b1.png","9oEG0":"shelf-tab.210480e4.png","dWxQ8":"shelf-tab@2x.85309329.png","5g59d":"shelf-mob.0a3e7c68.png","j1yg9":"shelf-mob@2x.ebc25fea.png","hsRUh":"not-authorized-desktop.6c27e0a6.png","1upIx":"not-authorized-desktop@2x.9ddae744.png","eKnYn":"not-authorized-tab.714f45a8.png","c7aek":"not-authorized-tab@2x.44e6f4e9.png","cIGCY":"not-authorized-mob.aa0b504f.png","19mTM":"not-authorized-mob@2x.26f7c7af.png","b9auz":"index.64ec11de.js"}')),a("3cAoS"),a("ckd7b"),a("cwmxx"),a("8cKaM"),a("bM9yp"),a("4dIBK");var i,s=a("7Y9D8"),c=a("8cKaM"),u=a("krGWQ"),l=a("eyjy7"),f=a("gjiCh"),d=a("a1APH"),g=a("ftYLF"),m=(a("7Y9D8"),a("krGWQ"),a("gjiCh"),a("8cKaM"),a("eCaDt")),v=a("2nhTy"),p=a("h0oKa");a("a1APH");i=new URL(a("kyEFX").resolve("jUDzA"),import.meta.url).toString();var h;h=new URL(a("kyEFX").resolve("2fqpn"),import.meta.url).toString();var b;b=new URL(a("kyEFX").resolve("9oEG0"),import.meta.url).toString();var y;y=new URL(a("kyEFX").resolve("dWxQ8"),import.meta.url).toString();var L;L=new URL(a("kyEFX").resolve("5g59d"),import.meta.url).toString();var E;E=new URL(a("kyEFX").resolve("j1yg9"),import.meta.url).toString();var k=a("cXoHY"),B=(g=a("ftYLF"),s=a("7Y9D8"),u=a("krGWQ"),f=a("gjiCh"),c=a("8cKaM"),m=a("eCaDt"),v=a("2nhTy"),p=a("h0oKa"),d=a("a1APH"),k=a("cXoHY"),a("aWXZt"));function S(){s.Notify.info("You haven't added a movie to your watched yet"),(0,k.addClass)(u.refs.watchedBtn,"active-button"),(0,k.removeClass)(u.refs.queueBtn,"active-button")}async function w(){v.paginationLibrary.off("afterMove",F),v.paginationLibrary.on("afterMove",H),sessionStorage.removeItem("currentPageLibraryQueue"),(0,k.addClass)(u.refs.watchedBtn,"active-button"),(0,k.removeClass)(u.refs.queueBtn,"active-button"),(0,k.hideElement)(u.refs.paginationBlock);try{(0,f.spinnerStart)();const e=sessionStorage.getItem("currentPageLibraryWatched"),n=e?parseInt(e,10):1,r=c.auth.currentUser;(0,g.onSnapshot)((0,g.doc)(c.db,"users",r.uid),(e=>{(0,k.enableButton)(u.refs.queueBtn);const r=e.data()?.watched||[],{total_results:o,results:a}=r[n-1]||[];if(a)u.refs.watchedBtn.removeEventListener("click",S),v.paginationLibrary.reset(o),v.paginationLibrary.movePageTo(n),(0,k.disableButton)(u.refs.watchedBtn),r.length>1?(0,k.showElement)(u.refs.paginationBlock):(0,k.hideElement)(u.refs.paginationBlock);else if(r.length>0){const e=r.length,t=9*e;v.paginationLibrary.reset(t),v.paginationLibrary.movePageTo(e),r.length>1?(0,k.showElement)(u.refs.paginationBlock):(0,k.hideElement)(u.refs.paginationBlock)}else(0,k.hideElement)(u.refs.paginationBlock),(0,k.enableButton)(u.refs.queueBtn),u.refs.moviesList.innerHTML="",u.refs.moviesList.insertAdjacentHTML("afterbegin",(0,d.createImageNotification)(t(i),t(h),t(b),t(y),t(L),t(E),"There are no movies in your watched yet")),u.refs.watchedBtn.removeEventListener("click",X),u.refs.watchedBtn.removeEventListener("click",w),u.refs.watchedBtn.addEventListener("click",S)}))}catch(e){console.log("Error getting cached document:",e)}finally{setTimeout((()=>{(0,f.spinnerStop)()}),200)}}async function H(e){const t=e.page;try{(0,f.spinnerStart)();const e=c.auth.currentUser;(0,g.onSnapshot)((0,g.doc)(c.db,"users",e.uid),(e=>{const{results:n}=e.data().watched?.[t-1]||[];if(n){const e=n.map((({id:e,img:t,title:n,genres:r,releaseYear:o,vote:a})=>{const i=r.split(","),s=(0,B.createGenresArr)(i);return(0,m.createMovie)(e,t,n,s,o,a)}));u.refs.moviesList.innerHTML=e.join("")}sessionStorage.setItem("currentPageLibraryWatched",t),(0,p.scrollToTop)()}))}catch(e){console.log("Error getting cached document:",e)}finally{setTimeout((()=>{(0,f.spinnerStop)()}),200)}}B=a("aWXZt");function _(){s.Notify.info("You haven't added a movie to your queue yet"),(0,k.addClass)(u.refs.queueBtn,"active-button"),(0,k.removeClass)(u.refs.watchedBtn,"active-button")}async function q(){v.paginationLibrary.off("afterMove",H),v.paginationLibrary.off("afterMove",F),v.paginationLibrary.on("afterMove",F),sessionStorage.removeItem("currentPageLibraryWatched"),(0,k.addClass)(u.refs.queueBtn,"active-button"),(0,k.removeClass)(u.refs.watchedBtn,"active-button"),(0,k.hideElement)(u.refs.paginationBlock);try{const e=sessionStorage.getItem("currentPageLibraryQueue"),n=e?parseInt(e,10):1;(0,f.spinnerStart)();const r=c.auth.currentUser;(0,g.onSnapshot)((0,g.doc)(c.db,"users",r.uid),(e=>{(0,k.enableButton)(u.refs.watchedBtn);const r=e.data()?.queue||[],{total_results:o,results:a}=r[n-1]||[];if(a)u.refs.queueBtn.removeEventListener("click",_),v.paginationLibrary.reset(o),v.paginationLibrary.movePageTo(n),(0,k.disableButton)(u.refs.queueBtn),r.length>1?(0,k.showElement)(u.refs.paginationBlock):(0,k.hideElement)(u.refs.paginationBlock);else if(r.length>0){const e=r.length,t=9*e;v.paginationLibrary.reset(t),v.paginationLibrary.movePageTo(e),r.length>1?(0,k.showElement)(u.refs.paginationBlock):(0,k.hideElement)(u.refs.paginationBlock)}else sessionStorage.removeItem("currentPageLibraryWatched"),(0,k.hideElement)(u.refs.paginationBlock),(0,k.enableButton)(u.refs.queueBtn),u.refs.moviesList.innerHTML="",u.refs.moviesList.insertAdjacentHTML("afterbegin",(0,d.createImageNotification)(t(i),t(h),t(b),t(y),t(L),t(E),"There are no movies in your queue yet")),u.refs.queueBtn.removeEventListener("click",X),u.refs.queueBtn.removeEventListener("click",q),u.refs.queueBtn.addEventListener("click",_)}))}catch(e){console.log("Error getting cached document:",e)}finally{setTimeout((()=>{(0,f.spinnerStop)()}),200)}}async function F(e){const t=e.page;try{(0,f.spinnerStart)();const e=c.auth.currentUser;(0,g.onSnapshot)((0,g.doc)(c.db,"users",e.uid),(e=>{const{results:n}=e.data().queue?.[t-1]||[];if(n){const e=n.map((({id:e,img:t,title:n,genres:r,releaseYear:o,vote:a})=>{const i=r.split(","),s=(0,B.createGenresArr)(i);return(0,m.createMovie)(e,t,n,s,o,a)}));u.refs.moviesList.innerHTML=e.join("")}sessionStorage.setItem("currentPageLibraryQueue",t),(0,p.scrollToTop)()}))}catch(e){console.log("Error getting cached document:",e)}finally{setTimeout((()=>{(0,f.spinnerStop)()}),200)}}var R;k=a("cXoHY");R=new URL(a("kyEFX").resolve("hsRUh"),import.meta.url).toString();var T;T=new URL(a("kyEFX").resolve("1upIx"),import.meta.url).toString();var A;A=new URL(a("kyEFX").resolve("eKnYn"),import.meta.url).toString();var M;M=new URL(a("kyEFX").resolve("c7aek"),import.meta.url).toString();var I;I=new URL(a("kyEFX").resolve("cIGCY"),import.meta.url).toString();var C;let U;C=new URL(a("kyEFX").resolve("19mTM"),import.meta.url).toString();let x="queue";function P(e){if(x!==e){x=e;const t="queue"===x?"watched":"queue";sessionStorage.removeItem(`currentPageLibrary${t}`)}}function X(){s.Notify.info("To use the library you should sign up or sign in")}(0,k.removeClass)(u.refs.homeLink,"active-link"),(0,k.addClass)(u.refs.libraryLink,"active-link");(0,l.onAuthStateChanged)(c.auth,(e=>{if((0,k.enableButton)(u.refs.queueBtn),(0,k.enableButton)(u.refs.watchedBtn),(0,k.hideElement)(u.refs.paginationBlock),sessionStorage.removeItem("currentPageHomePopularMovies"),sessionStorage.removeItem("currentPageHomeQuery"),sessionStorage.removeItem("userQuery"),e){const e=sessionStorage.getItem("currentPageLibraryWatched");u.refs.queueBtn.removeEventListener("click",X),u.refs.watchedBtn.removeEventListener("click",X),u.refs.queueBtn.addEventListener("click",(()=>{P("queue"),q()})),u.refs.watchedBtn.addEventListener("click",(()=>{P("watched"),w()})),e?w():q()}else(0,f.spinnerStop)(),(0,k.removeClass)(u.refs.queueBtn,"active-button"),(0,k.removeClass)(u.refs.watchedBtn,"active-button"),(0,k.hideElement)(u.refs.paginationBlock),(0,k.enableButton)(u.refs.queueBtn),U="Sign up or sign in to use your library",u.refs.moviesList.innerHTML="",u.refs.moviesList.insertAdjacentHTML("afterbegin",(0,d.createImageNotification)(t(R),t(T),t(A),t(M),t(I),t(C),"Sign up or sign in to use your library")),u.refs.queueBtn.removeEventListener("click",q),u.refs.watchedBtn.removeEventListener("click",w),u.refs.queueBtn.removeEventListener("click",_),u.refs.watchedBtn.removeEventListener("click",S),u.refs.queueBtn.addEventListener("click",X),u.refs.watchedBtn.addEventListener("click",X)})),a("amAFH"),a("dIO09"),a("4S0r6");
//# sourceMappingURL=library.ee47b614.js.map
