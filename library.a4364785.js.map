{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,kxBCAzDH,EAAA,S,uDCAA,I,EAAAI,EAAAJ,EAAA,S,iECAAK,EAAAL,EAAA,S,gGCAAM,EAAiB,IAAAC,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FE,EAAiB,IAAAP,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FG,EAAiB,IAAAR,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FI,EAAiB,IAAAT,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FK,EAAiB,IAAAV,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,oBCA5FP,EAAAL,EAAA,S,iIAqDO,SAASkB,IACdd,EAAAe,OAAOC,KAAK,kDAEZ,EAAAC,EAAAC,UAASC,EAAAC,KAAKC,WAAY,kBAC1B,EAAAJ,EAAAK,aAAYH,EAAAC,KAAKG,SAAU,gB,CAGtBC,eAAeC,IACpBC,EAAAC,kBAAkBC,IAAI,YAAaC,GAEnCH,EAAAC,kBAAkBG,GAAG,YAAaC,GAElCC,eAAeC,WAAW,4BAC1B,EAAAhB,EAAAC,UAASC,EAAAC,KAAKC,WAAY,kBAC1B,EAAAJ,EAAAK,aAAYH,EAAAC,KAAKG,SAAU,kBAC3B,EAAAN,EAAAiB,aAAYf,EAAAC,KAAKe,iBAEjB,KACE,EAAAC,EAAAC,gBACA,MAAMC,EAAoBN,eAAeO,QACvC,6BAEIC,EAAqBF,EACvBG,SAASH,EAAmB,IAC5B,EAEEI,EAAOC,EAAAC,KAAKC,aAElB,EAAA5C,EAAA6C,aAAW,EAAA7C,EAAA8C,KAAIJ,EAAAK,GAAI,QAASN,EAAKO,MAAMC,KACrC,EAAAjC,EAAAkC,cAAahC,EAAAC,KAAKG,UAClB,MAAM6B,EAAiBF,EAAIG,QAAQC,SAAW,IAExCC,cAAEA,EAAaC,QAAEA,GACrBJ,EAAeZ,EAAqB,IAAM,GAE5C,GAAIgB,EACF9B,EAAAC,kBAAkB8B,MAAMF,GAExB7B,EAAAC,kBAAkB+B,WAAWlB,IAC7B,EAAAvB,EAAA0C,eAAcxC,EAAAC,KAAKC,YAEf+B,EAAe5D,OAAS,GAAG,EAAAyB,EAAA2C,aAAYzC,EAAAC,KAAKe,kBAC3C,EAAAlB,EAAAiB,aAAYf,EAAAC,KAAKe,sBAEtB,GAAIiB,EAAe5D,OAAS,EAAG,CAC7B,MAAMqE,EAAiBT,EAAe5D,OAChCsE,EAAmC,EAAjBD,EACxBnC,EAAAC,kBAAkB8B,MAAMK,GACxBpC,EAAAC,kBAAkB+B,WAAWG,GAE7BT,EAAe5D,OAAS,GACpB,EAAAyB,EAAA2C,aAAYzC,EAAAC,KAAKe,kBACjB,EAAAlB,EAAAiB,aAAYf,EAAAC,KAAKe,gB,MAErB4B,UAAY,2CA7EpB,EAAA9C,EAAAiB,aAAYf,EAAAC,KAAKe,kBACjB,EAAAlB,EAAAkC,cAAahC,EAAAC,KAAKG,UAElBJ,EAAAC,KAAK4C,WAAWC,UAAY,GAC5B9C,EAAAC,KAAK4C,WAAWE,mBACd,cACA,EAAAC,EAAAC,yBACEC,EAAAnE,GACAmE,EAAA5D,GACA4D,EAAA3D,GACA2D,EAAA1D,GACA0D,EAAAzD,GACAyD,EAAAxD,GACAkD,YAIJ5C,EAAAC,KAAKC,WAAWiD,oBAAoB,QAASC,GAC7CpD,EAAAC,KAAKC,WAAWiD,oBAAoB,QAAS7C,GAE7CN,EAAAC,KAAKC,WAAWmD,iBAAiB,QAAS1D,E,IA+DxC,MAAO2D,GACPC,QAAQC,IAAI,iCAAkCF,E,CAC/C,QACCG,YAAW,MACT,EAAAxC,EAAAyC,cAAa,GACZ,I,EAIArD,eAAeO,EAAyB+C,GAC7C,MAAMC,EAAcD,EAAME,KAE1B,KACE,EAAA5C,EAAAC,gBAEA,MAAMK,EAAOC,EAAAC,KAAKC,aAElB,EAAA5C,EAAA6C,aAAW,EAAA7C,EAAA8C,KAAIJ,EAAAK,GAAI,QAASN,EAAKO,MAAMgC,IACrC,MAAMzB,QAAEA,GAAYyB,EAAI5B,OAAOC,UAAUyB,EAAc,IAAM,GAE7D,GAAIvB,EAAS,CACX,MAAM0B,EAAe1B,EAAQ2B,KAC3B,EAAC1F,GAAEA,EAAE2F,IAAEA,EAAGC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,EAAWC,KAAEA,MACtC,MAAMC,EAAYH,EAAOI,MAAM,KACzBC,GAAe,EAAAC,EAAAC,iBAAgBJ,GACrC,OAAO,EAAAK,EAAAC,aAAYtG,EAAI2F,EAAKC,EAAOM,EAAcJ,EAAaC,EAAK,IAIvErE,EAAAC,KAAK4C,WAAWC,UAAYiB,EAAac,KAAK,G,CAGhDhE,eAAeiE,QAAQ,4BAA6BlB,IAEpD,EAAAmB,EAAAC,cAAa,G,CAEf,MAAO1B,GACPC,QAAQC,IAAI,iCAAkCF,E,CAC/C,QACCG,YAAW,MACT,EAAAxC,EAAAyC,cAAa,GACZ,I,ePrGA,SAASuB,IACdpG,EAAAe,OAAOC,KAAK,gDAEZ,EAAAC,EAAAC,UAASC,EAAAC,KAAKG,SAAU,kBACxB,EAAAN,EAAAK,aAAYH,EAAAC,KAAKC,WAAY,gB,CAGxBG,eAAe6E,IACpB3E,EAAAC,kBAAkBC,IAAI,YAAaG,GACnCL,EAAAC,kBAAkBC,IAAI,YAAaC,GACnCH,EAAAC,kBAAkBG,GAAG,YAAaD,GAElCG,eAAeC,WAAW,8BAC1B,EAAAhB,EAAAC,UAASC,EAAAC,KAAKG,SAAU,kBACxB,EAAAN,EAAAK,aAAYH,EAAAC,KAAKC,WAAY,kBAC7B,EAAAJ,EAAAiB,aAAYf,EAAAC,KAAKe,iBAEjB,IACE,MAAMmE,EAAkBtE,eAAeO,QAAQ,2BACzCgE,EAAmBD,EACrB7D,SAAS6D,EAAiB,IAC1B,GAEJ,EAAAlE,EAAAC,gBAEA,MAAMK,EAAOC,EAAAC,KAAKC,aAElB,EAAA5C,EAAA6C,aAAW,EAAA7C,EAAA8C,KAAIJ,EAAAK,GAAI,QAASN,EAAKO,MAAMC,KACrC,EAAAjC,EAAAkC,cAAahC,EAAAC,KAAKC,YAClB,MAAMmF,EAAetD,EAAIG,QAAQoD,OAAS,IAEpClD,cAAEA,EAAaC,QAAEA,GACrBgD,EAAaD,EAAmB,IAAM,GAExC,GAAI/C,EACF9B,EAAAC,kBAAkB8B,MAAMF,GAExB7B,EAAAC,kBAAkB+B,WAAW6C,IAC7B,EAAAtF,EAAA0C,eAAcxC,EAAAC,KAAKG,UAEfiF,EAAahH,OAAS,GAAG,EAAAyB,EAAA2C,aAAYzC,EAAAC,KAAKe,kBACzC,EAAAlB,EAAAiB,aAAYf,EAAAC,KAAKe,sBAEtB,GAAIqE,EAAahH,OAAS,EAAG,CAC3B,MAAMqE,EAAiB2C,EAAahH,OAC9BsE,EAAmC,EAAjBD,EACxBnC,EAAAC,kBAAkB8B,MAAMK,GACxBpC,EAAAC,kBAAkB+B,WAAWG,GAE7B2C,EAAahH,OAAS,GAClB,EAAAyB,EAAA2C,aAAYzC,EAAAC,KAAKe,kBACjB,EAAAlB,EAAAiB,aAAYf,EAAAC,KAAKe,gB,MAErB4B,UAAY,wCA5EpB/B,eAAeC,WAAW,8BAC1B,EAAAhB,EAAAiB,aAAYf,EAAAC,KAAKe,kBACjB,EAAAlB,EAAAkC,cAAahC,EAAAC,KAAKG,UAClBJ,EAAAC,KAAK4C,WAAWC,UAAY,GAC5B9C,EAAAC,KAAK4C,WAAWE,mBACd,cACA,EAAAC,EAAAC,yBACEC,EAAAnE,GACAmE,EAAA5D,GACA4D,EAAA3D,GACA2D,EAAA1D,GACA0D,EAAAzD,GACAyD,EAAAxD,GACAkD,YAIJ5C,EAAAC,KAAKG,SAAS+C,oBAAoB,QAASC,GAC3CpD,EAAAC,KAAKG,SAAS+C,oBAAoB,QAAS+B,GAE3ClF,EAAAC,KAAKG,SAASiD,iBAAiB,QAAS4B,E,IA8DtC,MAAO3B,GACPC,QAAQC,IAAI,iCAAkCF,E,CAC/C,QACCG,YAAW,MACT,EAAAxC,EAAAyC,cAAa,GACZ,I,EAIArD,eAAeK,EAAuBiD,GAC3C,MAAMC,EAAcD,EAAME,KAE1B,KACE,EAAA5C,EAAAC,gBAEA,MAAMK,EAAOC,EAAAC,KAAKC,aAElB,EAAA5C,EAAA6C,aAAW,EAAA7C,EAAA8C,KAAIJ,EAAAK,GAAI,QAASN,EAAKO,MAAMgC,IACrC,MAAMzB,QAAEA,GAAYyB,EAAI5B,OAAOoD,QAAQ1B,EAAc,IAAM,GAE3D,GAAIvB,EAAS,CACX,MAAM0B,EAAe1B,EAAQ2B,KAC3B,EAAC1F,GAAEA,EAAE2F,IAAEA,EAAGC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,EAAWC,KAAEA,MACtC,MAAMC,EAAYH,EAAOI,MAAM,KACzBC,GAAe,EAAAC,EAAAC,iBAAgBJ,GAErC,OAAO,EAAAK,EAAAC,aAAYtG,EAAI2F,EAAKC,EAAOM,EAAcJ,EAAaC,EAAK,IAIvErE,EAAAC,KAAK4C,WAAWC,UAAYiB,EAAac,KAAK,G,CAGhDhE,eAAeiE,QAAQ,0BAA2BlB,IAElD,EAAAmB,EAAAC,cAAa,G,CAEf,MAAO1B,GACPC,QAAQC,IAAI,iCAAkCF,E,CAC/C,QACCG,YAAW,MACT,EAAAxC,EAAAyC,cAAa,GACZ,I,qBQ1JP6B,EAAiB,IAAAvG,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FmG,EAAiB,IAAAxG,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FoG,EAAiB,IAAAzG,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FqG,EAAiB,IAAA1G,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FsG,EAAiB,IAAA3G,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MbuB5F,IAAIuG,EcvBJC,EAAiB,IAAA7G,IAAoBP,EAAA,SAAAQ,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WdwB5F,IAAIyG,EAAuB,QAK3B,SAASC,EAAcC,GACrB,GAAIF,IAAyBE,EAAS,CACpCF,EAAuBE,EAEvB,MAAMC,EACqB,UAAzBH,EAAmC,UAAY,QACjDjF,eAAeC,WAAW,qBAAqBmF,I,EAI5C,SAAS7C,IACdvE,EAAAe,OAAOC,KAAK,mD,EAdd,EAAAC,EAAAK,aAAYH,EAAAC,KAAKiG,SAAU,gBAC3B,EAAApG,EAAAC,UAASC,EAAAC,KAAKkG,YAAa,gBA0D3B,EAAAC,EAAAC,oBAAmB7E,EAAAC,MAAMF,IAGvB,IA5CA,EAAAzB,EAAAkC,cAAahC,EAAAC,KAAKG,WAClB,EAAAN,EAAAkC,cAAahC,EAAAC,KAAKC,aAClB,EAAAJ,EAAAiB,aAAYf,EAAAC,KAAKe,iBAEjBH,eAAeC,WAAW,gCAC1BD,eAAeC,WAAW,wBAC1BD,eAAeC,WAAW,aAsCtBS,EAAM,CACR,MAAMJ,EAAoBN,eAAeO,QACvC,6BAEFpB,EAAAC,KAAKG,SAAS+C,oBAAoB,QAASC,GAC3CpD,EAAAC,KAAKC,WAAWiD,oBAAoB,QAASC,GAE7CpD,EAAAC,KAAKG,SAASiD,iBAAiB,SAAS,KACtC0C,EAAc,SACdb,GAAoB,IAEtBlF,EAAAC,KAAKC,WAAWmD,iBAAiB,SAAS,KACxC0C,EAAc,WACdzF,GAAsB,IAGpBa,EACFb,IAEA4E,G,MArDJ,EAAAjE,EAAAyC,gBACA,EAAA5D,EAAAK,aAAYH,EAAAC,KAAKG,SAAU,kBAC3B,EAAAN,EAAAK,aAAYH,EAAAC,KAAKC,WAAY,kBAC7B,EAAAJ,EAAAiB,aAAYf,EAAAC,KAAKe,kBACjB,EAAAlB,EAAAkC,cAAahC,EAAAC,KAAKG,UAElBwF,EAAY,yCAEZ5F,EAAAC,KAAK4C,WAAWC,UAAY,GAC5B9C,EAAAC,KAAK4C,WAAWE,mBACd,cACA,EAAAC,EAAAC,yBACEC,EAAAqC,GACArC,EAAAsC,GACAtC,EAAAuC,GACAvC,EAAAwC,GACAxC,EAAAyC,GACAzC,EAAA2C,GAXQ,2CAgBZ7F,EAAAC,KAAKG,SAAS+C,oBAAoB,QAAS+B,GAC3ClF,EAAAC,KAAKC,WAAWiD,oBAAoB,QAAS7C,GAC7CN,EAAAC,KAAKG,SAAS+C,oBAAoB,QAAS8B,GAC3CjF,EAAAC,KAAKC,WAAWiD,oBAAoB,QAASxD,GAE7CK,EAAAC,KAAKG,SAASiD,iBAAiB,QAASD,GACxCpD,EAAAC,KAAKC,WAAWmD,iBAAiB,QAASD,EA4Bd,I","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-09a97cd58ded2866.js","src/library.js","src/js/library/libraryPage.js","src/js/library/queue.js","node_modules/@parcel/runtime-js/lib/runtime-cc1b53d63aa02cae.js","node_modules/@parcel/runtime-js/lib/runtime-9a55a12c3a10bfc0.js","node_modules/@parcel/runtime-js/lib/runtime-70e8d5245f1527bf.js","node_modules/@parcel/runtime-js/lib/runtime-e232da75be8bc574.js","node_modules/@parcel/runtime-js/lib/runtime-e26e74c719cde646.js","node_modules/@parcel/runtime-js/lib/runtime-e9f34a9c6e24c352.js","src/js/library/watched.js","node_modules/@parcel/runtime-js/lib/runtime-806eaa65ee3f0d1b.js","node_modules/@parcel/runtime-js/lib/runtime-1d3c9e8b3c81c300.js","node_modules/@parcel/runtime-js/lib/runtime-f377c22930507f56.js","node_modules/@parcel/runtime-js/lib/runtime-40294294ce237769.js","node_modules/@parcel/runtime-js/lib/runtime-dd0cbf5d87d99768.js","node_modules/@parcel/runtime-js/lib/runtime-8a9088a83513b538.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.a4364785.js\\\",\\\"jUDzA\\\":\\\"shelf-desktop.7bb6d0fb.png\\\",\\\"2fqpn\\\":\\\"shelf-desktop@2x.6909a1b1.png\\\",\\\"9oEG0\\\":\\\"shelf-tab.210480e4.png\\\",\\\"dWxQ8\\\":\\\"shelf-tab@2x.85309329.png\\\",\\\"5g59d\\\":\\\"shelf-mob.0a3e7c68.png\\\",\\\"j1yg9\\\":\\\"shelf-mob@2x.ebc25fea.png\\\",\\\"hsRUh\\\":\\\"not-authorized-desktop.6c27e0a6.png\\\",\\\"1upIx\\\":\\\"not-authorized-desktop@2x.9ddae744.png\\\",\\\"eKnYn\\\":\\\"not-authorized-tab.714f45a8.png\\\",\\\"c7aek\\\":\\\"not-authorized-tab@2x.44e6f4e9.png\\\",\\\"cIGCY\\\":\\\"not-authorized-mob.aa0b504f.png\\\",\\\"19mTM\\\":\\\"not-authorized-mob@2x.26f7c7af.png\\\",\\\"b9auz\\\":\\\"index.653a3683.js\\\"}\"));","import './js/modals/auth-modals/auth-modal.js';\nimport './js/modals/auth-modals/signup-modal.js';\nimport './js/modals/auth-modals/signout-modal.js';\nimport './js/modals/auth-modals/firebase.js';\nimport './js/addAuthIcon.js';\nimport './js/menu.js';\nimport './js/library/libraryPage.js';\nimport './js/library/watched.js';\nimport './js/calcScrollValue.js';\nimport './js/modals/movie-modal/movie-modal.js';\nimport './js/theme.js';\n","import { Notify } from 'notiflix';\n\nimport { auth } from '../modals/auth-modals/firebase';\nimport { refs } from '../refs';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { spinnerStop } from '../loader';\nimport { createImageNotification } from '../image-notification';\nimport { getQueueCollection, handleQueueBtnClick } from './queue';\nimport { getWatchedCollection, handleWatchedBtnClick } from './watched';\nimport {\n  addClass,\n  enableButton,\n  hideElement,\n  removeClass,\n} from '../common-methods';\n\nimport notAuthorizedDesktop1 from '../../images/not-authorized/not-authorized-desktop.png';\nimport notAuthorizedDesktop2 from '../../images/not-authorized/not-authorized-desktop@2x.png';\nimport notAuthorizedTab1 from '../../images/not-authorized/not-authorized-tab.png';\nimport notAuthorizedTab2 from '../../images/not-authorized/not-authorized-tab@2x.png';\nimport notAuthorizedMob1 from '../../images/not-authorized/not-authorized-mob.png';\nimport notAuthorizedMob2 from '../../images/not-authorized/not-authorized-mob@2x.png';\n\nlet imageText;\nlet currentActiveSection = 'queue';\n\nremoveClass(refs.homeLink, 'active-link');\naddClass(refs.libraryLink, 'active-link');\n\nfunction switchSection(section) {\n  if (currentActiveSection !== section) {\n    currentActiveSection = section;\n\n    const inactiveSection =\n      currentActiveSection === 'queue' ? 'watched' : 'queue';\n    sessionStorage.removeItem(`currentPageLibrary${inactiveSection}`);\n  }\n}\n\nexport function handleBtnClickUnauthorised() {\n  Notify.info('To use the library you should sign up or sign in');\n}\n\nconst onDownLoadPage = () => {\n  enableButton(refs.queueBtn);\n  enableButton(refs.watchedBtn);\n  hideElement(refs.paginationBlock);\n\n  sessionStorage.removeItem('currentPageHomePopularMovies');\n  sessionStorage.removeItem('currentPageHomeQuery');\n  sessionStorage.removeItem('userQuery');\n};\n\nconst updateUIForNotAuthorized = () => {\n  spinnerStop();\n  removeClass(refs.queueBtn, 'active-button');\n  removeClass(refs.watchedBtn, 'active-button');\n  hideElement(refs.paginationBlock);\n  enableButton(refs.queueBtn);\n\n  imageText = 'Sign up or sign in to use your library';\n\n  refs.moviesList.innerHTML = '';\n  refs.moviesList.insertAdjacentHTML(\n    'afterbegin',\n    createImageNotification(\n      notAuthorizedDesktop1,\n      notAuthorizedDesktop2,\n      notAuthorizedTab1,\n      notAuthorizedTab2,\n      notAuthorizedMob1,\n      notAuthorizedMob2,\n      imageText\n    )\n  );\n\n  refs.queueBtn.removeEventListener('click', getQueueCollection);\n  refs.watchedBtn.removeEventListener('click', getWatchedCollection);\n  refs.queueBtn.removeEventListener('click', handleQueueBtnClick);\n  refs.watchedBtn.removeEventListener('click', handleWatchedBtnClick);\n\n  refs.queueBtn.addEventListener('click', handleBtnClickUnauthorised);\n  refs.watchedBtn.addEventListener('click', handleBtnClickUnauthorised);\n};\n\nonAuthStateChanged(auth, user => {\n  onDownLoadPage();\n\n  if (user) {\n    const storedPageWatched = sessionStorage.getItem(\n      'currentPageLibraryWatched'\n    );\n    refs.queueBtn.removeEventListener('click', handleBtnClickUnauthorised);\n    refs.watchedBtn.removeEventListener('click', handleBtnClickUnauthorised);\n\n    refs.queueBtn.addEventListener('click', () => {\n      switchSection('queue');\n      getQueueCollection();\n    });\n    refs.watchedBtn.addEventListener('click', () => {\n      switchSection('watched');\n      getWatchedCollection();\n    });\n\n    if (storedPageWatched) {\n      getWatchedCollection();\n    } else {\n      getQueueCollection();\n    }\n  } else {\n    updateUIForNotAuthorized();\n  }\n});\n","import { doc, onSnapshot } from 'firebase/firestore';\nimport { Notify } from 'notiflix';\n\nimport { refs } from '../refs';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport { auth, db } from '../modals/auth-modals/firebase';\nimport { createMovie } from '../gallery-container/create-movie-markup';\nimport { paginationLibrary } from '../pagination';\nimport { scrollToTop } from '../scrollToTop';\nimport { createImageNotification } from '../image-notification';\nimport { handleBtnClickUnauthorised } from './libraryPage';\n\nimport shelfDesktop1 from '../../images/shelf/shelf-desktop.png';\nimport shelfDesktop2 from '../../images/shelf/shelf-desktop@2x.png';\nimport shelfTab1 from '../../images/shelf/shelf-tab.png';\nimport shelfTab2 from '../../images/shelf/shelf-tab@2x.png';\nimport shelfMob1 from '../../images/shelf/shelf-mob.png';\nimport shelfMob2 from '../../images/shelf/shelf-mob@2x.png';\nimport {\n  addClass,\n  disableButton,\n  enableButton,\n  hideElement,\n  removeClass,\n  showElement,\n} from '../common-methods';\nimport { getMoreWatchedCollection } from './watched';\nimport { createGenresArr } from '../gallery-container/create -genres-arrey';\n\nexport const updateUIForNoMoviesInQueue = () => {\n  sessionStorage.removeItem('currentPageLibraryWatched');\n  hideElement(refs.paginationBlock);\n  enableButton(refs.queueBtn);\n  refs.moviesList.innerHTML = '';\n  refs.moviesList.insertAdjacentHTML(\n    'afterbegin',\n    createImageNotification(\n      shelfDesktop1,\n      shelfDesktop2,\n      shelfTab1,\n      shelfTab2,\n      shelfMob1,\n      shelfMob2,\n      imageText\n    )\n  );\n\n  refs.queueBtn.removeEventListener('click', handleBtnClickUnauthorised);\n  refs.queueBtn.removeEventListener('click', getQueueCollection);\n\n  refs.queueBtn.addEventListener('click', handleQueueBtnClick);\n};\n\nexport function handleQueueBtnClick() {\n  Notify.info(\"You haven't added a movie to your queue yet\");\n\n  addClass(refs.queueBtn, 'active-button');\n  removeClass(refs.watchedBtn, 'active-button');\n}\n\nexport async function getQueueCollection() {\n  paginationLibrary.off('afterMove', getMoreWatchedCollection);\n  paginationLibrary.off('afterMove', getMoreQueueCollection);\n  paginationLibrary.on('afterMove', getMoreQueueCollection);\n\n  sessionStorage.removeItem('currentPageLibraryWatched');\n  addClass(refs.queueBtn, 'active-button');\n  removeClass(refs.watchedBtn, 'active-button');\n  hideElement(refs.paginationBlock);\n\n  try {\n    const storedPageQueue = sessionStorage.getItem('currentPageLibraryQueue');\n    const initialPageQueue = storedPageQueue\n      ? parseInt(storedPageQueue, 10)\n      : 1;\n\n    spinnerStart();\n\n    const user = auth.currentUser;\n\n    onSnapshot(doc(db, 'users', user.uid), doc => {\n      enableButton(refs.watchedBtn);\n      const currentQueue = doc.data()?.queue || [];\n\n      const { total_results, results } =\n        currentQueue[initialPageQueue - 1] || [];\n\n      if (results) {\n        paginationLibrary.reset(total_results);\n\n        paginationLibrary.movePageTo(initialPageQueue);\n        disableButton(refs.queueBtn);\n\n        if (currentQueue.length > 1) showElement(refs.paginationBlock);\n        else hideElement(refs.paginationBlock);\n      } else {\n        if (currentQueue.length > 0) {\n          const newCurrentPage = currentQueue.length;\n          const newTotalResults = newCurrentPage * 9;\n          paginationLibrary.reset(newTotalResults);\n          paginationLibrary.movePageTo(newCurrentPage);\n\n          currentQueue.length > 1\n            ? showElement(refs.paginationBlock)\n            : hideElement(refs.paginationBlock);\n        } else {\n          imageText = `There are no movies in your queue yet`;\n\n          updateUIForNoMoviesInQueue();\n        }\n      }\n    });\n  } catch (e) {\n    console.log('Error getting cached document:', e);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 200);\n  }\n}\n\nexport async function getMoreQueueCollection(event) {\n  const currentPage = event.page;\n\n  try {\n    spinnerStart();\n\n    const user = auth.currentUser;\n\n    onSnapshot(doc(db, 'users', user.uid), doc => {\n      const { results } = doc.data().queue?.[currentPage - 1] || [];\n\n      if (results) {\n        const moviesMarkUp = results.map(\n          ({ id, img, title, genres, releaseYear, vote }) => {\n            const genresArr = genres.split(',');\n            const newGenresArr = createGenresArr(genresArr);\n\n            return createMovie(id, img, title, newGenresArr, releaseYear, vote);\n          }\n        );\n\n        refs.moviesList.innerHTML = moviesMarkUp.join('');\n      }\n\n      sessionStorage.setItem('currentPageLibraryQueue', currentPage);\n\n      scrollToTop();\n    });\n  } catch (e) {\n    console.log('Error getting cached document:', e);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 200);\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"jUDzA\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2fqpn\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9oEG0\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dWxQ8\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5g59d\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"j1yg9\")).toString();","import { doc, onSnapshot } from 'firebase/firestore';\nimport { Notify } from 'notiflix';\n\nimport { refs } from '../refs';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport { auth, db } from '../modals/auth-modals/firebase';\nimport { createMovie } from '../gallery-container/create-movie-markup';\nimport { paginationLibrary } from '../pagination';\nimport { scrollToTop } from '../scrollToTop';\nimport { createImageNotification } from '../image-notification';\nimport { handleBtnClickUnauthorised } from './libraryPage';\nimport { getMoreQueueCollection } from './queue';\nimport {\n  addClass,\n  disableButton,\n  enableButton,\n  hideElement,\n  removeClass,\n  showElement,\n} from '../common-methods';\n\nimport shelfDesktop1 from '../../images/shelf/shelf-desktop.png';\nimport shelfDesktop2 from '../../images/shelf/shelf-desktop@2x.png';\nimport shelfTab1 from '../../images/shelf/shelf-tab.png';\nimport shelfTab2 from '../../images/shelf/shelf-tab@2x.png';\nimport shelfMob1 from '../../images/shelf/shelf-mob.png';\nimport shelfMob2 from '../../images/shelf/shelf-mob@2x.png';\nimport { createGenresArr } from '../gallery-container/create -genres-arrey';\n\nexport const updateUIForNoMoviesInWatched = () => {\n  hideElement(refs.paginationBlock);\n  enableButton(refs.queueBtn);\n\n  refs.moviesList.innerHTML = '';\n  refs.moviesList.insertAdjacentHTML(\n    'afterbegin',\n    createImageNotification(\n      shelfDesktop1,\n      shelfDesktop2,\n      shelfTab1,\n      shelfTab2,\n      shelfMob1,\n      shelfMob2,\n      imageText\n    )\n  );\n\n  refs.watchedBtn.removeEventListener('click', handleBtnClickUnauthorised);\n  refs.watchedBtn.removeEventListener('click', getWatchedCollection);\n\n  refs.watchedBtn.addEventListener('click', handleWatchedBtnClick);\n};\n\nexport function handleWatchedBtnClick() {\n  Notify.info(\"You haven't added a movie to your watched yet\");\n\n  addClass(refs.watchedBtn, 'active-button');\n  removeClass(refs.queueBtn, 'active-button');\n}\n\nexport async function getWatchedCollection() {\n  paginationLibrary.off('afterMove', getMoreQueueCollection);\n\n  paginationLibrary.on('afterMove', getMoreWatchedCollection);\n\n  sessionStorage.removeItem('currentPageLibraryQueue');\n  addClass(refs.watchedBtn, 'active-button');\n  removeClass(refs.queueBtn, 'active-button');\n  hideElement(refs.paginationBlock);\n\n  try {\n    spinnerStart();\n    const storedPageWatched = sessionStorage.getItem(\n      'currentPageLibraryWatched'\n    );\n    const initialPageWatched = storedPageWatched\n      ? parseInt(storedPageWatched, 10)\n      : 1;\n\n    const user = auth.currentUser;\n\n    onSnapshot(doc(db, 'users', user.uid), doc => {\n      enableButton(refs.queueBtn);\n      const currentWatched = doc.data()?.watched || [];\n\n      const { total_results, results } =\n        currentWatched[initialPageWatched - 1] || [];\n\n      if (results) {\n        paginationLibrary.reset(total_results);\n\n        paginationLibrary.movePageTo(initialPageWatched);\n        disableButton(refs.watchedBtn);\n\n        if (currentWatched.length > 1) showElement(refs.paginationBlock);\n        else hideElement(refs.paginationBlock);\n      } else {\n        if (currentWatched.length > 0) {\n          const newCurrentPage = currentWatched.length;\n          const newTotalResults = newCurrentPage * 9;\n          paginationLibrary.reset(newTotalResults);\n          paginationLibrary.movePageTo(newCurrentPage);\n\n          currentWatched.length > 1\n            ? showElement(refs.paginationBlock)\n            : hideElement(refs.paginationBlock);\n        } else {\n          imageText = `There are no movies in your watched yet`;\n\n          updateUIForNoMoviesInWatched();\n        }\n      }\n    });\n  } catch (e) {\n    console.log('Error getting cached document:', e);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 200);\n  }\n}\n\nexport async function getMoreWatchedCollection(event) {\n  const currentPage = event.page;\n\n  try {\n    spinnerStart();\n\n    const user = auth.currentUser;\n\n    onSnapshot(doc(db, 'users', user.uid), doc => {\n      const { results } = doc.data().watched?.[currentPage - 1] || [];\n\n      if (results) {\n        const moviesMarkUp = results.map(\n          ({ id, img, title, genres, releaseYear, vote }) => {\n            const genresArr = genres.split(',');\n            const newGenresArr = createGenresArr(genresArr);\n            return createMovie(id, img, title, newGenresArr, releaseYear, vote);\n          }\n        );\n\n        refs.moviesList.innerHTML = moviesMarkUp.join('');\n      }\n\n      sessionStorage.setItem('currentPageLibraryWatched', currentPage);\n\n      scrollToTop();\n    });\n  } catch (e) {\n    console.log('Error getting cached document:', e);\n  } finally {\n    setTimeout(() => {\n      spinnerStop();\n    }, 200);\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hsRUh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1upIx\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"eKnYn\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"c7aek\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"cIGCY\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"19mTM\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$7Y9D8","$ftYLF","$b37acc844ad50687$exports","URL","resolve","import","meta","url","toString","$36a27543ce928eaa$exports","$811eebaa4ca77e96$exports","$f66fc2de8c3a9edd$exports","$81eb3c813ecf0d4b$exports","$af47caa28cefd59a$exports","$1901232826cf781b$export$6bcf972b1b4e3ed1","Notify","info","$cXoHY","addClass","$krGWQ","refs","watchedBtn","removeClass","queueBtn","async","$1901232826cf781b$export$aae93e7006da7095","$2nhTy","paginationLibrary","off","$f750572b871ea0ea$export$185f8fbd2f1bc446","on","$1901232826cf781b$export$c6c1ed67d241f55f","sessionStorage","removeItem","hideElement","paginationBlock","$gjiCh","spinnerStart","storedPageWatched","getItem","initialPageWatched","parseInt","user","$8cKaM","auth","currentUser","onSnapshot","doc","db","uid","doc1","enableButton","currentWatched","data","watched","total_results","results","reset","movePageTo","disableButton","showElement","newCurrentPage","newTotalResults","imageText","moviesList","innerHTML","insertAdjacentHTML","$a1APH","createImageNotification","$parcel$interopDefault","removeEventListener","$e4c5085c7aeb7370$export$3a05ffb0a891f860","addEventListener","e","console","log","setTimeout","spinnerStop","event","currentPage","page","doc2","moviesMarkUp","map","img","title","genres","releaseYear","vote","genresArr","split","newGenresArr","$aWXZt","createGenresArr","$eCaDt","createMovie","join","setItem","$h0oKa","scrollToTop","$f750572b871ea0ea$export$8a5282531a01148c","$f750572b871ea0ea$export$3857b2db2a248e6d","storedPageQueue","initialPageQueue","currentQueue","queue","$a2dfaad955d19406$exports","$c145527c7dc47c52$exports","$18c8c81fe903c9a3$exports","$8e3c84dd22c17fe7$exports","$58443f2bd6dd268a$exports","$e4c5085c7aeb7370$var$imageText","$db2ac07deeed6d34$exports","$e4c5085c7aeb7370$var$currentActiveSection","$e4c5085c7aeb7370$var$switchSection","section","inactiveSection","homeLink","libraryLink","$eyjy7","onAuthStateChanged"],"version":3,"file":"library.a4364785.js.map"}